<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Categories: Nginx | Learning Blog]]></title>
  <link href="http://fubuki.github.io/blog/categories/nginx/atom.xml" rel="self"/>
  <link href="http://fubuki.github.io/"/>
  <updated>2015-03-11T23:08:45+08:00</updated>
  <id>http://fubuki.github.io/</id>
  <author>
    <name><![CDATA[Fubuki]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[SEnginx]]></title>
    <link href="http://fubuki.github.io/blog/2015/03/11/senginx/"/>
    <updated>2015-03-11T22:29:42+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/03/11/senginx</id>
    <content type="html"><![CDATA[<!-- more -->


<p><a href="https://github.com/NeusoftSecurity/SEnginx">SEnginx</a> 在安全方面加強的 nginx 版本，裡面內裝一些跟安全相關的套件。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Nginx 的 Worker_cpu_affinity 參數]]></title>
    <link href="http://fubuki.github.io/blog/2015/01/25/nginx-worker-cpu-affinity/"/>
    <updated>2015-01-25T21:13:34+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/01/25/nginx-worker-cpu-affinity</id>
    <content type="html"><![CDATA[<!-- more -->


<p>nginx 可以藉由使用 <code>worker_cpu_affinity</code> 在多核分配進程在哪幾顆 CPU 下執行。</p>

<p>四核四個進程</p>

<pre><code>worker_processes 4;
worker_cpu_affinity 1000 0100 0010 0001;
</code></pre>

<p>四核兩個進程</p>

<pre><code>worker_processes 2;
worker_cpu_affinity 1000 0001;
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Nginx-systemtap-toolkit]]></title>
    <link href="http://fubuki.github.io/blog/2015/01/07/nginx-systemtap-toolkit/"/>
    <updated>2015-01-07T21:52:05+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/01/07/nginx-systemtap-toolkit</id>
    <content type="html"><![CDATA[<!-- more -->


<p>之前有學到使用 <code>systemtap</code> 跟蹤內核的行為，這樣用來了解程式的行為十分有幫助，而今天看到了一個使用
<code>systemtap</code> 測試分析 nginx 的工具 : <a href="https://github.com/openresty/nginx-systemtap-toolkit">nginx-systemtap-toolkit</a>， 這個工具可以用來查看 nginx 內部各個
區塊實際執行的情形，在他的網頁有很多命令可以使用，如果遇到 strace 還不能解決的情形可以透過的工具查詢。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Openresty Server]]></title>
    <link href="http://fubuki.github.io/blog/2014/12/21/ngx-openresty/"/>
    <updated>2014-12-21T22:59:33+08:00</updated>
    <id>http://fubuki.github.io/blog/2014/12/21/ngx-openresty</id>
    <content type="html"><![CDATA[<!-- more -->


<p><a href="http://openresty.org/">openresty</a> 為核心是 nginx 在外加一些第三方模組的版本。</p>

<p>之前在研究 nginx 跟 Lua 結合的資訊時看到了一篇 <a href="http://agentzh.org/misc/slides/ngx-openresty-ecosystem/#1">ngx_openresty: an Nginx ecosystem glued by Lua</a>，
裡面介紹了 <a href="https://github.com/openresty/ngx_openresty">ngx-openresty</a> ，並且介紹了這個基於 nginx 擴展版本裡面有哪些功能，並且從文章標題就可以
得知裡面使用 Lua 整合整個生態系統。</p>

<p><a href="http://openresty.org/">openresty</a> 從官網看到可以透過編寫 Lua 腳本跟 mysql,redis 連線做出反向代理的功能，另外也有看到有人
使用 Lua 編寫影音加密的 Http LiveStream 的功能，看起來可以考慮將一些應用層的東西轉移到 ngix 上面藉此提高
網站的效率。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Nginx 添加 Lua 的模組]]></title>
    <link href="http://fubuki.github.io/blog/2014/12/17/nginx-lua/"/>
    <updated>2014-12-17T00:25:04+08:00</updated>
    <id>http://fubuki.github.io/blog/2014/12/17/nginx-lua</id>
    <content type="html"><![CDATA[<!-- more -->


<p>Nginx 可以藉由安裝 <a href="https://github.com/openresty/lua-nginx-module">lua-nginx-module</a> 支持 Lua，但是要安裝模組就必須從原始碼開始編譯，這邊就記錄一下
在 Centos 上面的安裝過程。</p>

<h3>下載 nginx 的原始碼</h3>

<pre><code>wget http://nginx.org/download/nginx-1.7.7.tar.gz
tar zxf nginx-1.7.7.tar.gz
</code></pre>

<h3>下載相關模組</h3>

<ol>
<li><a href="https://github.com/openresty/lua-nginx-module">lua-nginx-module</a> 支援 Lua 的模組</li>
<li><a href="https://github.com/simpl/ngx_devel_kit">ngx_devel_kit</a> Nginx 的開發工具有些模組需要這個套件</li>
<li><a href="http://luajit.org/">LuaJIT</a> Lua 的模組需要它編譯出來的 library</li>
<li><a href="https://github.com/openresty/set-misc-nginx-module">set-misc-nginx-module</a> 增加 nginx 支援的語法，順便編譯進去增強 nginx 的功能</li>
</ol>


<h3>編譯參數</h3>

<pre><code>./configure --prefix=/opt/nginx \
     --add-module=/root/ngx_devel_kit \
     --add-module=/root/lua-nginx-module \
     --add-module=/root/set-misc-nginx-module 

make &amp;&amp; make install
</code></pre>

<h3>設定成服務</h3>

<pre><code>ln -s /opt/nginx/sbin/nginx /usr/sbin/nginx

vim /etc/init.d/nginx
</code></pre>
]]></content>
  </entry>
  
</feed>
