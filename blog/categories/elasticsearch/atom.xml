<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Categories: Elasticsearch | Learning Blog]]></title>
  <link href="http://fubuki.github.io/blog/categories/elasticsearch/atom.xml" rel="self"/>
  <link href="http://fubuki.github.io/"/>
  <updated>2015-09-13T22:30:35+08:00</updated>
  <id>http://fubuki.github.io/</id>
  <author>
    <name><![CDATA[Fubuki]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[使用 Stream2es 匯入 Wikipedia 資料]]></title>
    <link href="http://fubuki.github.io/blog/2015/09/05/elasticsearch-wikipedia-stream2es/"/>
    <updated>2015-09-05T23:38:48+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/09/05/elasticsearch-wikipedia-stream2es</id>
    <content type="html"><![CDATA[<!-- more -->


<p>目前手上已經有一些 Wikipedia 的資料，這是之前在使用 nlp4l 做為輸入資料遺留下來的，
那時使用了 json-wikipedia 將 xml 轉換成 json ，使用 jq 看過一遍大致上了解了內容的
資料結構，不過由於資料太過於龐大搜尋起來很久，所以使用了之前看到的工具 stream2es 將
手上的資料轉換到 elasticsearch 裡面。</p>

<p>最後轉換的結果有點少，只有一百九十萬多筆，有些資料似乎沒有匯入進去，之後要換用 Logstash
 匯入應該會有不一樣的結果。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elasticsearch 適合的 Shard Size]]></title>
    <link href="http://fubuki.github.io/blog/2015/09/03/elasticsearch-shard-size/"/>
    <updated>2015-09-03T23:12:17+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/09/03/elasticsearch-shard-size</id>
    <content type="html"><![CDATA[<!-- more -->


<p>最近在思考 elasticsearch 優化的部分，當 index 不斷擴大的時候怎麼處理，目前是想到將資料做
 shard 然後使用多個 node 加快搜尋的速度，但是這邊有個問題是每個 shard 的大小要怎麼決定，
 這邊就暫時參考 <a href="http://engineering.datarank.com/2015/07/08/balancing-elasticsearch-cluster-by-shard-size.html">Balancing an Elasticsearch Cluster by Shard Size</a> 裡面提到的指標和工具測試看看。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elasticsearch Autocomplete 功能]]></title>
    <link href="http://fubuki.github.io/blog/2015/08/28/elassticsearch-suggest/"/>
    <updated>2015-08-28T21:54:13+08:00</updated>
    <id>http://fubuki.github.io/blog/2015/08/28/elassticsearch-suggest</id>
    <content type="html"><![CDATA[<!-- more -->


<p>elasticsearch 的 suggest 主要分成下面三種</p>

<ol>
<li>Phrase Suggester</li>
<li>Term suggester</li>
<li>Completion Suggester</li>
</ol>


<p>其中 <code>Completion Suggester</code> 目前看起來最適合用來實做 autocomplete 功能，使用上可以搭配  <code>category</code> 可以
增強 autocomplete 的功能，<code>category</code> 能夠自行添加欄位讓開發者可以對資料進行過濾。</p>

<p>目前看起來有幾點要注意:</p>

<ol>
<li>Completion Suggester 可以透過加上 weight 調整排序。</li>
<li>Completion Suggester 有 input 和 output 的欄位，可以讓多個輸入對應到單一輸輸出。</li>
<li>如果有多個 document 相同 output 那 elasticsearch 會只輸出一個。</li>
<li>Category 可以參照 <a href="https://www.elastic.co/blog/elasticsearch-1-2-adding-context-suggestions">Elasticsearch 1.2: Adding Context to Suggestions</a> 裡面有個使用 Category 過濾的例子。</li>
</ol>


<h4>建立 index 和 mapping file</h4>

<h4>加入 document</h4>

<h4>更新 document</h4>

<h4>搜尋</h4>
]]></content>
  </entry>
  
</feed>
